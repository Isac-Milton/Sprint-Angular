<app-header></app-header>
<div class="container d-flex flex-column min-vh-100 ">
  <h2 class="text-center text-primary mb-4 fw-bold">Dashboard</h2>
  <div class="row mb-4">
    <div class="col-md-4">
      <label for="selectVehicle" class="form-label fw-semibold">Veículo</label>
      <select id="selectVehicle" [(ngModel)]="selectedId" (change)="onSelectChange()" class="form-select">
        <option [value]="''" disabled selected>Selecione um veículo</option>
        <option *ngFor="let vehicle of vehicles" [value]="vehicle.id">{{ vehicle.vehicle}}</option>
      </select>
    </div>
  </div>
  <div *ngIf="selectedVehicleFromSelect" class="row text-center mb-4">
    <div class="col-md-4 quadro-dados">
      <div class="border rounded py-3">
        <h6 class="text-muted">Total de Vendas</h6>
        <h4 class="text-primary">{{ selectedVehicleFromSelect.volumetotal }}</h4>
        <small>Unid.</small>
      </div>
    </div>
    <div class="col-md-4 quadro-dados">
      <div class="border rounded py-3">
        <h6 class="text-muted">Conectados</h6>
        <h4 class="text-primary">{{ selectedVehicleFromSelect.connected }}</h4>
        <small>Unid.</small>
      </div>
    </div>
    <div class="col-md-4 quadro-dados">
      <div class="border rounded py-3">
        <h6 class="text-muted">Atualizações de Software</h6>
        <h4 class="text-primary">{{ selectedVehicleFromSelect.softwareUpdates }}</h4>
        <small>Unid.</small>
      </div>
    </div>
  </div>
  <div *ngIf="selectedVehicleFromSelect" class="text-center mb-4">
    <img [src]="selectedVehicleFromSelect.img" [alt]="selectedVehicleFromSelect.vehicle" class="img-fluid rounded" style="max-width: 800px;">

  </div>
  
  <div class="bg-white shadow" style="position: fixed; bottom: 0; left: 0; right: 0; z-index: 1030;">
    <div class="container py-3">
      <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped text-center align-middle mb-0">
          <thead  class="table-header-azul">
            <tr>
              <th><i class="bi bi-upc-scan me-1"></i> VIN</th>
              <th><i class="bi bi-speedometer2 me-1"></i> Odômetro</th>
              <th><i class="bi bi-fuel-pump-fill me-1"></i> Combustível</th>
              <th><i class="bi bi-circle-half me-1"></i> Status</th>
              <th><i class="bi bi-geo-alt-fill me-1"></i> Lat.</th>
              <th><i class="bi bi-geo-alt-fill me-1"></i> Long.</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="p-2">
                <div class="input-group">
                  <input [(ngModel)]="searchVin" class="form-control shadow-sm" placeholder="Digite o VIN" />
                  <button class="btn btn-primary" (click)="searchByVin()">Buscar</button>
                </div>
              </td>
              
              <td>
                {{ selectedVehicleFromSearch?.odometro ?selectedVehicleFromSearch?.odometro + ' Km' : '' }}
              </td>
              <td>
                {{ selectedVehicleFromSearch?.nivelCombustivel ?selectedVehicleFromSearch?.nivelCombustivel + ' %' : '' }}
              </td>
              <td>{{ selectedVehicleFromSearch?.status }}</td>
              <td>{{ selectedVehicleFromSearch?.lat }}</td>
              <td>{{ selectedVehicleFromSearch?.long }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>